# LikeLion 8th Coding Session

## Django 기초

HTML, CSS, Python 기초 선행 필요 <br/>

+ Django
  + Python으로 작성된 오픈소스 웹 어플리케이션 프레임워크
  + 인스타그램, 핀터레스트 django기반
  + 특징
    + Python 기반
    + MTV 패턴
    + Admin 기능 제공
    + 간편한 URL 파싱

+ Framework
  + 기본적으로 필요한 기능을 갖춰, 원하는 기능 구현에 집중하도록 도와주는 개발 환경

+ MTV 패턴

  __Model__ - __View__ - __Template__ <br/>
  + URLconf : URL 경로에 맞춰 View와 Template 연결
  + Template : 사용자에게 보여지는 화면
  + View : 웹 요청을 받고, 전달받은 데이터를 처리해서 가공
  + Model : 데이터베이스에 저장되는 데이터
  
+ 사전 준비
  + Github 가입
  + Visual Studio Code
    + Extension - Beautify 설치 - 코드 정리


## Hello, Django

+ 가상환경
  + 자신이 원하는 Python 환경 구축을 위해 필요한 모듈만 담아놓는 바구니

+ PIP
  + Python으로 작성된 패키지 소프트웨어를 관리하는 __패키지 관리 시스템__
  
+ VS Code 단축키
  + 현재 커서 위치의 코드 이동 alt ↑↓

+ 가상환경 명령어 모음
  + 가상환경 생성
  ```python -m venv <가상환경 이름>```
  
  + 가상환경 활성화
    + 윈도우 ```source <가상환경 이름>/Scripts/activate```
    + Linux, Mac ```source <가상환경 이름>/bin/acrivate```
  
  + 가상환경 끄기 ```deactivate```

+ Django 명령어 모음
  + Django 패키지 설치 ``pip install django``
  + Django 프로젝트 생성 ``django-admin startproject <프로젝트명> .``
    + 마지막에 .(온점)을 붙이면 새로운 폴더가 생기지 않음
  + Django App 생성 ``python manage.py startapp <App 이름>``
  + Django 로컬 서버 시작  ``python manage.py runserver``
  
+ Django의 Project & App
  + 하나의 Project는 하나의 웹사이트
  + Project 안의 의미 있는 기능들을 __각각의 App으로 관리__
  + 자주 볼 파일들
    + __settings.py__ : 전체 프로젝트를 관리하는 설정 파일
    + __urls.py__ : 프로젝트의 URL 관리 파일
    + __veiws.py__ : 웹 요청을 받고, 전달받은 데이터를 처리해서 가공하는 파일
    + __models.py__ : Database와 관련된 다양한 역할 수행
    + __admin.py__ :  관리자 관련 파일
    + __apps.py__ : Project에게 App의 존재를 알려줄 때 활용되는 파일
+ 홈페이지 출력하기
  1. __settings.py__ : Project에게 Appdml 존재 알리기
  2. __Templates__ : User에게 보여줄 HTML 파일 만들기
  3. __views.py__ : 요청이 들어오면 HTML 파일을 열어주는 함수 정의
  4. __urls.py__ :  url 요청을 views와 연결하기
-----------------
+ 강의 진행
  + 깃헙 레포 생성
  + VS code 기본 터미널 Bash 선택
  + 워크스페이스에 새 폴더 생성
  + 로컬 깃 레포 초기화를 위한 명령어 
    ```terminal
    echo "# <레포 이름>" >> README.md
    git init
    git add README.md
    git commit -m "first commit"
    git remote add origin https://github.com/<유저 이름>/<레포 이름>.git
    git push -u origin master
    ```
  + .gitignore 추가 [(VisualStudioCode, Django, Python)](https://www.toptal.com/developers/gitignore/api/visualstudiocode,django,python)
    + ###Django### 밑에 <가상환경 이름> 추가 후 __저장__
    + ``git add .``
    + ``git commit -m "Add .gitignore"``
    + ``git push origin master``
  + 가상환경 생성 ``python -m venv venv``
  + 가상환경 활성화 ``source venv/Scripts/activate``
    + 가상환경을 키면 터미널에 (venv) 나타남
  + Django 설치 ``pip install django``
    + pip update ``python -m pip install --upgrade pip``
  + 프로젝트 생성 ``django-admin startproject dreamaryproject .``
  + 로컬 서버 켜기 ``python manage.py runserver``
    + 컨트롤 누르고 들어가보기 ``127.0.0.1:8000``
    + ctrl + c 눌러서 종료
  + 앱 생성 ``python manage.py startapp page``
  + dreamaryproject 폴더의 
    + settings.py 의 
      + INSTALLED_APPS에 ``'page.apps.PageConfig',`` 추가 
      + 선택사항 (107, 109 line) 
        +  ``LANGUAGE_CODE = 'ko-kr'``로 설정 
        + ``TIME_ZONE  = 'Asia/Seoul'``로 설정 
  + page 폴더에
    + templates 폴더를 만들고 
      + home.html 만들기 
        + !치고 엔터 누르기 
        + ```<html lang="ko">``` 
        + ```<title>```와 ```<body>```에 내용 추가 후 저장 
      
    + views.py에서
      ```python
      def home(request):
        return render(request, 'home.html')
      ```
  + dreamaryproject 폴더의 
    + urls.py 에서
      + 위에 ``from page import views``
      + ``urlpatterns``에 ``path('', views.home, name="home"),`` 추가
  + 서버 실행하여 확인    
    
   
## Django가 관리하는 법

- [소스 참고](https://github.com/TwoShot22/Dreamary_Class/)
- Bootstrap
  - Front-End 개발을 빠르고 쉽게 할 수 있는 __오픈 소스 Framework__
  - 누구나 쉬운 사용 가능
  - 반응형 CSS 제공
  - 모든 최신 브라우저와 호환
  - PC & 모바일 디자인 제공

- URL 관리
  - urls.py의 urlpatterns에서 담당
  - Path의 구조
    - path('URL', views 내부의 함수, name="url의 이름"),
    - __'URL'__ : 페이지 주소
    - __함수__ : url이 불렸을 때 실행할 함수
    - __name__ : 해당 path를 대표하는 이름

- Template 언어
  - 파이썬 변수 & 문법을 HTML에서 쓸 수 있도록 __Django에서 제공하는 언어__
  - 템플릿 변수 ``{{ }}`` 명사
  - 템플릿 태그 ``{% %}`` 

- Static File
  - 이미지나 CSS, JS 파일처럼 내용이 고정되어 있어, <br/>
    __응답을 할 때 파일 그대로를 보내주면 되는 파일__
  - __Static__ : - 웹 서비스를 위해 __개발자가 준비해두를 파일__
  - __Media__ : - 웹 서비스 이용자들이 __업로드하는 파일__
  - Static File 처리하기
    - __Static 폴더 생성__ : App 폴더 내에 static 폴더 만들기 & 파일 생성
    - __Settings.py (Static 설정)__ : 
      ```python
      STATICFILES_DIRS = [os.path.join(BASE_DIR, 'App 이름', 'static')] # Static File들이 들어있는 경로
      STATIC_ROOT = os.path.join(BASE_DIR, 'static') # Static File을 모을 디렉토리
      ```
    - __Static 파일 모으기__ : ``python manage.py collectstatic``
      - 여러 앱의 static파일들 한 곳으로 
      - 배포 직전에 한번 

--------------

- 강의 진행
  - 부트스트랩 [[사이트]](https://getbootstrap.com/)
    - documentation [[링크]](https://getbootstrap.com/docs/4.5/getting-started/introduction/)
    - example album [[링크]](https://getbootstrap.com/docs/4.5/examples/album/)
      - 오른쪽 마우스 클릭 
      - 페이지 소스 보기 - ctrl + A, ctrl + C
  - 가상환경 켜고 ``. venv/Scripts/Activate`` 서버 켜기``python manage.py runserver``
  - home.html에 붙여넣기 
    - (27 line) Bootstrap CDN 추가
      ```html
      <!-- CSS only -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

      <!-- JS, Popper.js, and jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
      ```
    - 카드를 하나만 남기고 나머지(118 ~ 239 line) 삭제
      - 다음 div를 하나만 남김 
        ```html 
        <div class="col-md-4">
          ...
        </div>
        ``` 

      - ```</main>```위로 ```</div>``` 세개 남기고 삭제, Beautify 활용
  - 강의따라 이것저것 변경
    - 맨 위로 돌아가기
    - title 변경
    - 샌드위치 버튼 삭제
    - 메인 버튼 하나 삭제, 문구 추가
  - dreamaryproject 폴더의 
    - urls.py 에서
      - ``urlpatterns``에 ``path('introduce/', views.introduce, name="introduce"),`` 추가
  - page app에
    - templates 폴더에
      - introduce.html 만들고 home.html 내용 복붙 후 저장
    - views.py에 새로운 뷰 추가
      ```python
      def introduce(request):
        return render(request, 'introduce.html')
      ```
    - introduce.html의 내용 변경, 주석 활용
      - ``<main>``안에 서비스 설명 추가
        ```html
        <div class="jumbotron p-4 p-md-5 text-white rounded bg-dark">
            <div class="col-md-7 px-0">
                <h1 class="display-4 font-bold">드리머리 - 헤어 서비스 O2O</h1>
                <p class="lead my-5">"Dreamary"는 헤어샵 예비 헤어 디자이너와 일반 대중을 연결하는 O2O 플랫폼입니다. 플랫폼을 통해 일반
                    소비자들은 예비 헤어 디자이너들의 이력, 포트폴리오, 리뷰, 별점 등을 확인하고 매우 합리적인 가격에 헤어 서비스를 받을 수
                    있습니다. "Dreamary"는 지금까지 존재하지 않았던 컨셉의 플랫폼으로, 향후 헤어 시장의 지평에 큰 변화를 가져올 것을 확신합니다.
                </p>
            </div>
        </div>
        ```
  - 서버 실행 후 확인 [https://127.0.0.1:8000/introduce/](https://127.0.0.1:8000/introduce/)
  - home.html에서
    - herf에 템플릿 언어 적용
      ```html
      <a href="{% url 'introduce' %}" class="btn btn-outline-danger">드리머리 알아 보기</a>
      ```
      - 'introduce'라는 이름의 url을 부름
  - dreamaryproject 폴더의 
    - settings.py 에서
      - 제일 밑에 코드 입력
        ```python
        STATIC_URL = '/static/'

        STATICFILES_DIRS = [
            os.path.join(BASE_DIR, 'page', 'static')
        ]

        STATIC_ROOT = os.path.join(BASE_DIR, 'static')
        ```
  - page 폴더 안에
    - static 폴더 생성하고 그 안에
      - css 폴더 생성
      - images 폴더 생성 후
        - 드리머리 로고 저장 Dreamary_Logo.png <br/>
          <img src="https://storage.googleapis.com/cr-resource/image/e2093d49f9b5b7ebc83423c071b4f0a1/yoonminfoundation/700/85af8ca4333d1132f44540e98032c26a.png" alt="Dreamary_Logo.png" width="200"/>
  
    - Static 파일 모으기 ``python manage.py collectstatic``
      - 밖에 static 폴더가 생김
    - templates 폴더에
      - home.html에서 load static 제일 위에 추가 및 header 변경
        ```html
        {% load static %}

        <!-- Header -->
        <header>
            <div id="navbar" class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
                <a id="logo" href="{% url 'home' %}" class="navbar-brand align-self-center">
                    <img src="{% static 'images/Dreamary_Logo.png' %}" width="35" height="35" alt="Dreamary_Logo.png">
                    <label class="navbar-brand align-self-center">Dreamary</label>
                </a>
            </div>
        </header>
        ```
      - 서버 실행하여 확인
      - introduce.html에 똑같이 적용
      
    - static 폴더에
      - css 폴더에
        - home.css, introduce.css 생성 및 작성
        
    - templates 폴더에
      - home.html, introduce.html에 static css추가 - bootstrap link 밑에 작성하여 덮어쓰기
        ```html
        <!-- CSS Static -->
        <link rel="stylesheet" href="{% static 'css/home.css' %}">
        ```
  - dreamaryproject 폴더의 
    - settings.py 에서
      - 제일 밑에 코드 입력
      ```python 
      MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
      MEDIA_URL = '/media/'
      ```
    - urls.py 에서
      - static url 추가
      ```python
      ...
      from django.conf import settings
      from django.conf.urls.static import static
      
      urlpatterns = [ 
      ...
      ] + static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)
      ```
     
     
## Django로 나를 소개해볼게 #1

- Model
  - __데이터에 접속하고 관리하도록 도와주는 객체__
  - 생성 & 적용
    - __models.py__ : #모델명의 첫글자는 무조건 대문자
    - __Terminal에서 적용__ 
      - __DB가 알아듣도록 번역하기__ : python manage.py makemigrations (+ App 이름)
      - __번역한 내용을 DB에 적용__ : python manage.py migrate (+ App 이름)



--------------

- 강의 진행
  - 가상환경 켜기 & 서버 켜기
  - page 앱 안에
    - models.py 안에
      - Designer class 생성
        ```python
        class Designer(models.Model):
          image = models.ImageField(upload_to = 'images/')
          name = models.CharField(max_length = 50)
          address = models.CharField(max_length = 255)
          description = models.TextField()    
        ```
      - Python 이미지 관리 패키지 Pillow 설치 ``pip install Pillow``
      - ``python manage.py makemigrations``
      - DB에 적용 ``python manage.py migrate``
    
